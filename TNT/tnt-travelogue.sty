\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{tnt-travelogue}[Qin Yidong's LaTeX package for writing travelogue]

\RequirePackage{graphicx} % 支持插图
\RequirePackage{subcaption} % 用于自定义标题样式
\RequirePackage{pdfpages} % 插入 PDF
\RequirePackage{float} % 提供更好的浮动体控制（如 [H] 选项）

% 自定义图片标题样式
\DeclareCaptionFont{kaiti}{\kaiti} % 标题使用楷体
\captionsetup[figure]{
    format=hang, % 标题悬挂缩进
    labelsep=quad, % 标签和内容之间使用一个空格的间距
    font={kaiti, small}, % 字体：楷体，小字号
    justification=centering % 文本居中对齐
}

% 彩色引述环境
\RequirePackage[skins]{tcolorbox} % 引入tcolorbox宏包
\RequirePackage{xcolor} % 提供颜色支持
%% 自定义样式
\newtcolorbox{quotepar}[2][]{
    colback=blue!10!white, % 盒子背景色
    colbacktitle=red!10!white, % 标题背景色
    coltitle=blue!70!black, % 标题文字颜色
    fontupper=\itshape, % 正文斜体
    fonttitle=\bfseries, % 标题粗体
    halign=justify, % 文字分散对齐
    % width=0.6\linewidth, % 盒子宽度
    left=2em,   % 盒子内容距离左边框的缩进
    right=2em,  % 盒子内容距离右边框的缩进
    top=1em,    % 盒子内容距离上边框的间距（可视为与“上正文”的空行）
    bottom=1em, % 盒子内容距离下边框的间距（可视为与“下正文”的空行）
    detach title, % 将标题与主体分离显示
    before upper={\parindent=2em}, % 添加首行缩进2em
    after upper={\par\vspace{1em}\hfill\tcbtitle}, % 在正文后添加1em垂直间距，然后右对齐落款
    title={——#1\,《#2》}, % 标题格式，其中 #2 为必选参数（如作品名），#1 为可选参数（如作者）
    float=h, % 允许盒子在此处浮动（here）
    every float=\centering, % 使整个盒子居中
}
\newtcolorbox{poem}[2][]{
    colback=green!10!white, % 盒子背景色
    colbacktitle=green!10!white, % 标题背景色
    coltitle=green!70!black, % 标题文字颜色
    fontupper=\itshape, % 正文斜体
    fonttitle=\bfseries, % 标题粗体
    halign=flush center, % 文字水平居中对齐
    % width=0.9\linewidth, % 盒子宽度
    left=2em,   % 盒子内容距离左边框的缩进
    right=2em,  % 盒子内容距离右边框的缩进
    top=1em,    % 盒子内容距离上边框的间距
    bottom=1em, % 盒子内容距离下边框的间距
    title={\vspace{0.5em}\centering 《#2》\\ #1 \\ \vspace{0.5em}},
    % enhanced, % 启用增强皮肤，以获得更多线条控制功能
    titlerule=0pt, % 将标题下方横线的粗细设置为0，即可取消横线
    float=h, % 允许盒子在此处浮动（here）
    every float=\centering, % 使整个盒子居中
}
% 定义一个新的彩色引述环境
\newtcolorbox{annotate}[1][]{%
    enhanced, % 启用增强模式
    sharp corners, % 直角
    frame hidden, % 隐藏外边框
    borderline west={2pt}{0pt}{red!75!black}, % 在盒子左侧绘制一条红色粗边框
    colback=red!5!white, % 设置背景色为浅红色
    left=15pt, % 左侧内边距，为边框留出空间
    fontupper=\itshape, % 引述文字使用斜体
    before skip=15pt, % 环境前的垂直间距
    after skip=15pt, % 环境后的垂直间距
    #1 % 允许通过可选参数进行额外定制
}

\RequirePackage[colorlinks,urlcolor=red,linkcolor=blue]{hyperref}
\RequirePackage{ulem}
